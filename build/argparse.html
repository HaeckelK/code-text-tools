<html>

<head>
  <title>Python Argparse Generator</title>
  <script>var exports={};</script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/python-argparse-generator@0.2/lib/index.js"></script>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<div id="app">
  <header>
    <div class="navbar navbar-default">
      <div class="navbar-header">
        <h1>{{ sitename }}</h1>
      </div>
    </div>
  </header>
  <main>
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <div class="panel panel-info">
          <div class="panel-heading">Python Argparse Generator</div>
          <div class="panel-body">
            <div class="panel panel-default">
              <div class="panel-body">Generate a Python Argparse CLI function.
                Add arguments in format name,type,default.
              </div>

            </div>
            <textarea style="margin: 0px; width: 300px; height: 200px;" v-model="specification.rawArguments"></textarea>
              <div class="col-md-12 verify">
              <label for="checkbox">Type Hints</label>
              <input type="checkbox" id="typeHintsCheckbox" v-model="typeHints"><br>
              Parser Variable Name: <input v-model="parserName">
          </div>
            <div class="form-group">
              <div class="col-md-12 verify">
                <strong>Python Argparse</strong>
                <pre>{{ argparse }}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
</main>

</div>
<script type="text/javascript">
  var webstore = new Vue({
    el: '#app',
    data: {
      sitename: "Python Argparse Generator",
      specification: {
        rawArguments: 'filename,str,/data/file.csv\nlimit,int,10\n--overwrite,bool,true\n--delay,int'
      },
      typeHints: true,
      parserName: "parser"
    },
    methods: {
      parseRawArgument(rawArgument) {
        let items = rawArgument.split(",").filter(e => e).map(x => x.trim());
        let name = items[0];
        let type = items[1] || "str";
        let value = items[2];
        return newArgument(name, type, '', value);
      }
    },
    computed: {
      arguments() {
        if (this.specification.rawArguments === "") {
          return [];
        }
        let x = this.specification.rawArguments.split("\n").filter(e => e).map(x => this.parseRawArgument(x));
        return x;
      },
      argparse() {
        let settings = defaultSettings();
        settings.typeHints = this.typeHints;
        settings.parserName = this.parserName;
        return argparseCode(this.arguments, settings);
      }
    }
  });
</script>
</body>

</html>
